// Material Design Component Overrides

@use './mixins' as *;
@use './menu' as *;

:root {
  --mat-field-bg: rgba(17, 24, 39, 0.55);
  --mat-field-bg-hover: rgba(17, 24, 39, 0.75);
  --mat-field-bg-focus: rgba(17, 24, 39, 0.75);
  --mat-field-border: rgba(148, 163, 184, 0.32);
  --mat-field-border-hover: rgba(249, 115, 22, 0.45);
  --mat-field-border-focus: var(--color-accent);
  --mat-field-text: #ffffff;
  --mat-field-label: rgba(255, 255, 255, 0.72);
  --mat-field-placeholder: rgba(255, 255, 255, 0.5);
  --mat-field-helper: rgba(255, 255, 255, 0.62);
  --mat-field-disabled-bg: rgba(17, 24, 39, 0.32);
  --mat-field-disabled-text: rgba(255, 255, 255, 0.35);

  --mat-option-hover-bg: color-mix(in srgb, var(--color-accent) 14%, transparent);
  --mat-option-active-bg: color-mix(in srgb, var(--color-accent) 26%, transparent);
  --mat-option-selected-bg: color-mix(in srgb, var(--color-accent) 20%, transparent);
  --mat-option-hover-text: var(--color-on-surface);
  --mat-option-active-text: var(--color-on-surface);

  --mat-control-focus-outline: none;

  --mat-card-bg: color-mix(in srgb, var(--color-surface-solid) 82%, transparent);
  --mat-card-border: color-mix(in srgb, var(--color-border) 70%, transparent);
  --mat-card-hover-bg: color-mix(in srgb, var(--color-surface-solid) 88%, transparent);
  --mat-card-shadow: var(--shadow-lg);

  --mat-menu-bg: var(--color-surface-solid);
  --mat-menu-border: var(--color-border);
}

.light-theme {
  --mat-field-bg: rgba(255, 255, 255, 0.95);
  --mat-field-bg-hover: #ffffff;
  --mat-field-bg-focus: #ffffff;
  --mat-field-border: rgba(15, 23, 42, 0.14);
  --mat-field-border-hover: rgba(249, 115, 22, 0.42);
  --mat-field-border-focus: var(--color-accent);
  --mat-field-text: #111827;
  --mat-field-helper: rgba(8, 18, 27, 0.62);
  --mat-field-disabled-bg: rgba(15, 23, 42, 0.08);
  --mat-field-disabled-text: rgba(8, 18, 27, 0.4);
  --mat-field-placeholder: color-mix(in srgb, #0f172a 60%, transparent);
  --mat-field-label: color-mix(in srgb, #0f172a 85%, transparent);

  --mat-option-hover-bg: color-mix(in srgb, var(--color-accent) 16%, transparent);
  --mat-option-active-bg: color-mix(in srgb, var(--color-accent) 28%, transparent);
  --mat-option-selected-bg: color-mix(in srgb, var(--color-accent) 20%, transparent);
  --mat-option-hover-text: var(--color-on-surface);
  --mat-option-active-text: var(--color-on-surface);

  --mat-card-bg: color-mix(in srgb, #f8fafc 92%, var(--color-white) 8%);
  --mat-card-border: rgba(15, 23, 42, 0.08);
  --mat-card-hover-bg: color-mix(in srgb, #ffffff 92%, rgba(249, 115, 22, 0.06) 8%);
  --mat-card-shadow: var(--shadow-md);

  --mat-menu-bg: var(--color-surface-solid);
  --mat-menu-border: var(--color-border);
}

.app-navbar.mat-toolbar {
  background: color-mix(in srgb, var(--color-primary) 88%, transparent) !important;
}

.mobile-nav-panel.mat-mdc-menu-panel {
  background: var(--color-surface-solid) !important;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-2xl);
  padding: var(--space-sm);
  box-shadow: var(--shadow-xl);

  .mat-mdc-menu-content {
    padding: 0 !important;
    display: flex;
    flex-direction: column;
    gap: var(--space-2xs);
  }
}

.mobile-nav-panel .mat-mdc-menu-item {
  min-height: 3.5rem;
  margin-bottom: 0;
  @include app-menu-item;

  mat-icon {
    margin-right: var(--space-sm);
    color: var(--color-accent);
    opacity: 0.85;
  }

  &:hover:not([disabled]) {
    background: color-mix(in srgb, var(--color-accent) 6%, transparent);
  }

  &.active {
    background: linear-gradient(
      90deg,
      color-mix(in srgb, var(--color-accent) 24%, transparent),
      color-mix(in srgb, var(--color-accent) 12%, transparent)
    );
    color: var(--color-on-surface);
    font-weight: var(--font-weight-semibold);

    &::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.5rem;
      bottom: 0.5rem;
      width: 3px;
      background: var(--color-accent);
      border-radius: 0 4px 4px 0;
    }

    mat-icon {
      opacity: 1;
      color: var(--color-accent);
    }
  }
}

.cdk-overlay-pane:has(.mobile-nav-panel) {
  bottom: calc(4.5rem + env(safe-area-inset-bottom, 0px)) !important;
  right: 1rem !important;
  left: auto !important;
  top: auto !important;
  position: fixed !important;
}

.mat-mdc-form-field {
  --mdc-theme-error: var(--color-danger) !important;
  --mat-form-field-outlined-outline-width: 1px;
  --mat-form-field-outlined-focus-outline-width: 1px;
  --mat-form-field-outlined-container-shape: var(--radius-input);
  --mdc-outlined-text-field-label-text-size: var(--font-size-sm);
  --mdc-outlined-text-field-floating-label-text-size: var(--font-size-sm);
  --mat-form-field-error-text-color: var(--color-danger) !important;
  --mat-form-field-outlined-outline-color: var(--mat-field-border) !important;
  --mat-form-field-outlined-hover-outline-color: var(--mat-field-border-hover) !important;
  --mat-form-field-outlined-focus-outline-color: var(--mat-field-border-focus) !important;
  --mat-form-field-outlined-error-outline-color: var(--color-danger) !important;
  --mat-form-field-outlined-input-text-color: var(--mat-field-text) !important;
  --mat-form-field-outlined-label-text-color: var(--mat-field-label) !important;
  --mat-form-field-outlined-input-text-placeholder-color: var(--mat-field-placeholder) !important;
  --mat-form-field-outlined-disabled-input-text-color: var(--mat-field-disabled-text) !important;
  --mat-form-field-outlined-disabled-label-text-color: var(--mat-field-disabled-text) !important;
  --mat-form-field-filled-container-color: transparent !important;
  --mat-form-field-filled-label-text-color: var(--mat-field-label) !important;
  --mat-form-field-filled-input-text-color: var(--mat-field-text) !important;
  --mat-form-field-filled-input-text-placeholder-color: var(--mat-field-placeholder) !important;
  --mat-form-field-filled-active-indicator-color: var(--mat-field-border-focus) !important;
  --mat-form-field-filled-hover-active-indicator-color: var(--mat-field-border-hover) !important;
  --mat-form-field-filled-disabled-container-color: var(--mat-field-disabled-bg) !important;
  --mat-form-field-filled-disabled-input-text-color: var(--mat-field-disabled-text) !important;
  --mat-form-field-filled-disabled-label-text-color: var(--mat-field-disabled-text) !important;
  --mat-form-field-filled-disabled-active-indicator-color: var(--mat-field-disabled-bg) !important;
  --mat-form-field-disabled-input-text-placeholder-color: var(--mat-field-disabled-text) !important;
  --mat-form-field-enabled-select-arrow-color: var(--mat-field-text) !important;
  --mat-form-field-disabled-select-arrow-color: var(--mat-field-disabled-text) !important;
  width: 100%;
  display: block;
}

.mat-mdc-select {
  --mat-select-enabled-trigger-text-color: var(--mat-field-text) !important;
  --mat-select-disabled-trigger-text-color: var(--mat-field-disabled-text) !important;
  --mat-select-placeholder-text-color: var(--mat-field-placeholder) !important;
  --mat-select-enabled-arrow-color: var(--mat-field-text) !important;
  --mat-select-disabled-arrow-color: var(--mat-field-disabled-text) !important;
  --mat-select-focused-arrow-color: var(--mat-field-border-focus) !important;
  --mat-select-invalid-arrow-color: var(--color-danger) !important;
}

.mat-mdc-select-trigger {
  display: flex;
  align-items: center;
}

.mat-mdc-select-value {
  line-height: 1.2;
}

.mat-mdc-form-field .mdc-notched-outline {
  overflow: visible;
}

.mat-mdc-form-field .mdc-notched-outline__notch {
  padding: 0.125rem 0.6rem;
  overflow: visible;
}

.app-search-field--compact .mdc-notched-outline__notch,
.select-field--compact .mdc-notched-outline__notch {
  padding-inline: 0.8rem;
}

.mat-mdc-form-field .mdc-floating-label {
  color: var(--mat-field-label) !important;
  opacity: 1 !important;
  font-weight: 500 !important;
  font-size: var(--font-size-sm);
  line-height: 1.2;
  padding: 0;
  background: transparent;
  z-index: 1;
  transition:
    color var(--duration-normal) var(--ease-in-out),
    transform var(--duration-normal) var(--ease-in-out),
    font-weight var(--duration-normal) var(--ease-in-out);
}

.mat-mdc-form-field .mdc-floating-label--float-above {
  transform: translateY(-1.85rem) scale(0.85) !important;
  transform-origin: left top;
}

.app-search-field--compact .mdc-floating-label--float-above,
.select-field--compact .mdc-floating-label--float-above {
  transform: translateY(-2.05rem) scale(0.85) !important;
}

mat-icon,
.mat-icon {
  line-height: 1;
  overflow: visible;
}

mat-icon svg,
.mat-icon svg {
  overflow: visible;
}

.mat-mdc-form-field.mat-focused .mdc-floating-label {
  color: var(--mat-field-border-focus) !important;
}

.mat-mdc-form-field.mat-form-field-invalid .mdc-floating-label {
  color: var(--color-danger) !important;
}

.mat-mdc-input-element,
.mat-mdc-select-value,
.mat-mdc-select-value-text,
.mat-mdc-select-min-line {
  color: var(--mat-field-text) !important;
}

.mat-mdc-input-element {
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  outline: none !important;
}

.mat-mdc-select-placeholder {
  color: var(--mat-field-placeholder) !important;
}

.mat-mdc-form-field .mat-mdc-form-field-icon {
  color: var(--mat-field-text) !important;
  opacity: 0.85;
}

.mat-mdc-form-field.mat-focused .mat-mdc-form-field-icon {
  color: var(--mat-field-border-focus) !important;
  opacity: 1;
}

.mat-mdc-input-element::placeholder {
  color: var(--mat-field-placeholder) !important;
  opacity: 0.8 !important;

  @supports (color: color-mix(in srgb, var(--mat-field-placeholder) 82%, transparent)) {
    color: color-mix(in srgb, var(--mat-field-placeholder) 82%, transparent) !important;
    opacity: 1 !important;
  }
}

.mat-mdc-form-field-subscript-wrapper,
.mat-mdc-form-field-hint {
  color: var(--mat-field-helper) !important;
}

.mat-mdc-form-field-error {
  color: var(--color-danger) !important;
  white-space: normal;
  line-height: 1.3;
  word-break: break-word;
}

.mat-mdc-form-field.mat-mdc-form-field-disabled .mdc-floating-label,
.mat-mdc-form-field.mat-mdc-form-field-disabled .mat-mdc-input-element,
.mat-mdc-form-field.mat-mdc-form-field-disabled .mat-mdc-select-trigger,
.mat-mdc-form-field.mat-mdc-form-field-disabled .mat-mdc-form-field-icon {
  color: var(--mat-field-disabled-text) !important;
}

.mat-mdc-form-field.mat-mdc-form-field-disabled .mat-mdc-text-field-wrapper {
  background: var(--mat-field-disabled-bg) !important;
  box-shadow: none !important;
}

.mat-mdc-text-field-wrapper.mdc-text-field {
  background: var(--mat-field-bg) !important;
  border-radius: var(--radius-input) !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important;
  overflow: visible;
  transition:
    background var(--duration-normal) var(--ease-in-out),
    box-shadow var(--duration-normal) var(--ease-in-out);
  width: 100%;
}

.mat-mdc-text-field-wrapper.mdc-text-field--outlined {
  background: var(--mat-field-bg) !important;
}

.mat-mdc-text-field-wrapper.mdc-text-field--outlined:hover,
.mat-mdc-text-field-wrapper.mdc-text-field--outlined:focus-within {
  background: var(--mat-field-bg-focus) !important;
  box-shadow: none !important;
}

.mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper,
.mat-mdc-form-field.mat-form-field-invalid .mat-mdc-text-field-wrapper {
  box-shadow: none !important;
  outline: none !important;
}

.mat-mdc-select-trigger {
  outline: none !important;
}

.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix {
  min-height: 48px;
  padding-top: var(--space-sm);
  padding-bottom: var(--space-sm);
  padding-inline: var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  overflow: visible;
}

.mat-mdc-form-field textarea.mat-mdc-input-element {
  padding-top: calc(var(--space-sm) + 2px) !important;
}

.mat-mdc-text-field-wrapper.mdc-text-field--filled:hover,
.mat-mdc-text-field-wrapper.mdc-text-field--filled:focus-within {
  background: var(--mat-field-bg-focus) !important;
  box-shadow: none !important;
}

.mat-mdc-select-panel {
  background: var(--mat-menu-bg) !important;
  border: 1px solid var(--mat-menu-border) !important;
  border-radius: var(--radius-menu) !important;
  box-shadow: var(--shadow-menu) !important;
  padding: var(--space-xs) !important;
}

.mat-mdc-option {
  border-radius: var(--radius-sm) !important;
  color: var(--color-on-surface) !important;
  transition:
    background var(--duration-fast) var(--ease-in-out),
    color var(--duration-fast) var(--ease-in-out);
}

.mat-mdc-option:hover,
.mat-mdc-option.mat-mdc-option-active {
  background: var(--mat-option-hover-bg) !important;
}

.mat-mdc-option.mat-mdc-option-selected {
  background: var(--mat-option-selected-bg) !important;
  color: var(--color-on-surface) !important;
}

.mat-mdc-slide-toggle {
  --mdc-switch-selected-focus-state-layer-color: var(--color-accent) !important;
  --mdc-switch-selected-handle-color: var(--color-accent) !important;
  --mdc-switch-selected-hover-state-layer-color: var(--color-accent) !important;
  --mdc-switch-selected-pressed-state-layer-color: var(--color-accent) !important;
  --mdc-switch-selected-focus-handle-color: var(--color-accent) !important;
  --mdc-switch-selected-hover-handle-color: var(--color-accent) !important;
  --mdc-switch-selected-pressed-handle-color: var(--color-accent) !important;
  --mdc-switch-selected-focus-track-color: var(--color-accent-light) !important;
  --mdc-switch-selected-hover-track-color: var(--color-accent-light) !important;
  --mdc-switch-selected-pressed-track-color: var(--color-accent-light) !important;
  --mdc-switch-selected-track-color: var(--color-accent-light) !important;
  --mdc-switch-unselected-focus-handle-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-focus-state-layer-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-focus-track-color: var(--color-surface) !important;
  --mdc-switch-unselected-handle-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-hover-handle-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-hover-state-layer-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-hover-track-color: var(--color-surface) !important;
  --mdc-switch-unselected-pressed-handle-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-pressed-state-layer-color: var(--color-on-surface) !important;
  --mdc-switch-unselected-pressed-track-color: var(--color-surface) !important;
  --mdc-switch-unselected-track-color: var(--color-surface) !important;
}

.mat-mdc-card {
  background: var(--mat-card-bg) !important;
  border: 1px solid var(--mat-card-border) !important;
  border-radius: var(--radius-card) !important;
  box-shadow: var(--shadow-lg) !important;
  color: var(--color-on-surface) !important;
  transition:
    transform var(--duration-normal) var(--ease-in-out),
    box-shadow var(--duration-normal) var(--ease-in-out),
    background var(--duration-normal) var(--ease-in-out);
}

.mat-mdc-card:hover,
.mat-mdc-card:focus-within {
  background: var(--mat-card-hover-bg) !important;
  box-shadow: var(--shadow-accent-soft) !important;
}

.mat-mdc-card-header,
.mat-mdc-card-content,
.mat-mdc-card-actions {
  color: inherit !important;
}

.mat-mdc-card-title,
.mat-mdc-card-subtitle {
  color: var(--color-on-surface) !important;
}

.mat-mdc-card-subtitle {
  opacity: 0.76;
}

.mat-mdc-card .mat-icon {
  color: rgba(var(--color-on-surface-rgb), 0.84);
}

.user-detail-card {
  background: color-mix(in srgb, var(--color-surface-solid) 92%, transparent) !important;
  border: 1px solid color-mix(in srgb, var(--mat-field-border) 120%, transparent) !important;
  border-radius: var(--radius-card) !important;
  box-shadow: var(--shadow-lg) !important;
  padding: var(--space-xl) !important;

  &__avatar {
    background: linear-gradient(135deg, var(--color-accent), var(--color-accent-dark)) !important;
  }
}

.user-detail-card.mat-mdc-card {
  --mdc-elevated-card-container-color: transparent;
  --mdc-outlined-card-container-color: transparent;
  --mdc-elevated-card-container-elevation: none;
  --mdc-outlined-card-outline-color: transparent;
  padding: 0;
}

.app-select-panel.mat-mdc-select-panel {
  background: var(--color-surface) !important;
  border-radius: var(--radius-lg) !important;
  border: 1px solid var(--mat-field-border) !important;
  box-shadow: var(--shadow-lg) !important;
  -webkit-backdrop-filter: blur(14px);
  backdrop-filter: blur(14px);
  padding-block: 0.25rem;
}

.app-select-panel .mat-mdc-option {
  border-radius: var(--radius-md) !important;
  color: var(--color-on-surface) !important;
  margin-inline: 0.25rem;
}

.app-select-panel .mat-mdc-option:hover:not(.mat-mdc-option-disabled),
.app-select-panel .mat-mdc-option.mat-mdc-option-active:not(.mat-mdc-option-disabled) {
  background: var(--mat-option-hover-bg) !important;
  color: var(--mat-option-hover-text) !important;
}

.app-select-panel .mat-mdc-option.mat-mdc-option-selected {
  background: var(--mat-option-selected-bg) !important;
  color: var(--mat-option-active-text) !important;
  font-weight: var(--font-weight-semibold);
}

.app-select-panel .mat-mdc-option.mat-mdc-option-disabled {
  color: var(--mat-field-disabled-text) !important;
}

.mat-pseudo-checkbox {
  --mat-pseudo-checkbox-selected-checkmark-color: var(--color-on-accent) !important;
  --mat-pseudo-checkbox-selected-color: var(--color-accent) !important;
  --mat-pseudo-checkbox-unselected-color: var(--mat-field-border) !important;
  border-radius: 0.375rem !important;
}

.mat-mdc-checkbox {
  --mdc-checkbox-unselected-icon-color: var(--mat-field-border) !important;
  --mdc-checkbox-unselected-hover-icon-color: var(--mat-field-border-hover) !important;
  --mdc-checkbox-unselected-focus-icon-color: var(--mat-field-border-hover) !important;
  --mdc-checkbox-selected-icon-color: var(--color-accent) !important;
  --mdc-checkbox-selected-hover-icon-color: var(--color-accent) !important;
  --mdc-checkbox-selected-focus-icon-color: var(--color-accent) !important;
  --mdc-checkbox-selected-pressed-icon-color: var(--color-accent-dark) !important;
  --mdc-checkbox-selected-checkmark-color: var(--color-on-accent) !important;
  --mdc-checkbox-unselected-focus-state-layer-color: color-mix(
    in srgb,
    var(--color-accent) 22%,
    transparent
  ) !important;
  --mdc-checkbox-selected-focus-state-layer-color: color-mix(
    in srgb,
    var(--color-accent) 26%,
    transparent
  ) !important;
  --mdc-checkbox-disabled-label-color: var(--mat-field-disabled-text) !important;
  --mdc-checkbox-unselected-pressed-icon-color: var(--color-on-surface) !important;
}

.mat-mdc-checkbox .mdc-form-field > label {
  color: var(--color-on-surface) !important;
}

.mat-mdc-radio-button {
  --mdc-radio-unselected-icon-color: var(--mat-field-border) !important;
  --mdc-radio-unselected-hover-icon-color: var(--mat-field-border-hover) !important;
  --mdc-radio-unselected-focus-icon-color: var(--mat-field-border-hover) !important;
  --mdc-radio-selected-icon-color: var(--color-accent) !important;
  --mdc-radio-selected-hover-icon-color: var(--color-accent) !important;
  --mdc-radio-selected-focus-icon-color: var(--color-accent) !important;
  --mdc-radio-selected-pressed-icon-color: var(--color-accent) !important;
  --mdc-radio-unselected-pressed-icon-color: var(--color-on-surface) !important;
  --mat-radio-ripple-color: color-mix(in srgb, var(--color-accent) 28%, transparent) !important;
  --mat-radio-checked-ripple-color: color-mix(
    in srgb,
    var(--color-accent) 32%,
    transparent
  ) !important;
}

.mat-mdc-radio-button .mdc-form-field > label {
  color: var(--color-on-surface) !important;
}

.form-field.is-invalid .mat-mdc-form-field .mat-mdc-select-arrow {
  color: var(--color-danger) !important;
}
.form-field.is-invalid .mat-mdc-form-field {
  --mat-form-field-outlined-outline-color: var(--color-danger) !important;
  --mat-form-field-outlined-hover-outline-color: var(--color-danger) !important;
  --mat-form-field-outlined-focus-outline-color: var(--color-danger) !important;
  --mat-form-field-outlined-error-outline-color: var(--color-danger) !important;
}

$filter-control-height: var(--btn-height-md);

.app-search-field .app-search__icon {
  flex-shrink: 0;
  margin-right: var(--space-xs);
  color: var(--color-muted);
}

:is(.filters-bar, .user-filters, .posts-filters)
  .app-search-field--compact
  .mat-mdc-form-field-infix,
:is(.filters-bar, .user-filters, .posts-filters) .select-field--compact .mat-mdc-form-field-infix {
  min-height: $filter-control-height;
  height: $filter-control-height;
  padding-block: 0;
  padding-inline: var(--space-md);
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

:is(.filters-bar, .user-filters, .posts-filters)
  .app-search-field--compact
  .mat-mdc-text-field-wrapper,
:is(.filters-bar, .user-filters, .posts-filters)
  .select-field--compact
  .mat-mdc-text-field-wrapper {
  height: $filter-control-height !important;
  min-height: $filter-control-height !important;
  padding-block: 0 !important;
}

.filters-bar .mat-mdc-form-field-subscript-wrapper,
.user-filters .mat-mdc-form-field-subscript-wrapper,
.posts-filters .mat-mdc-form-field-subscript-wrapper {
  display: none !important;
}

.btn--primary mat-icon {
  color: var(--color-on-accent) !important;
}

.btn--secondary mat-icon,
.light-theme .btn--secondary mat-icon,
body.light-theme .btn--secondary mat-icon {
  color: inherit !important;
}

.btn--danger mat-icon,
.btn--danger:hover mat-icon {
  color: var(--color-danger) !important;
}

.app-progress-bar .mdc-linear-progress__bar-inner {
  border-color: var(--color-accent) !important;
}

.app-progress-bar .mdc-linear-progress__buffer-bar {
  background-color: color-mix(in srgb, var(--color-accent) 14%, transparent) !important;
}

.cdk-overlay-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: var(--z-modal, 1300);
}

.cdk-overlay-container .cdk-overlay-backdrop.cdk-overlay-dark-backdrop {
  background: var(--overlay-backdrop-default);
}

.cdk-overlay-container .cdk-overlay-backdrop.app-dialog-overlay {
  background: var(--overlay-backdrop-strong);
}

.cdk-overlay-pane {
  z-index: calc(var(--z-modal, 1300) + 1);
  pointer-events: auto;
  box-sizing: border-box;
  max-width: 100%;
  max-height: 100%;
}

.cdk-overlay-pane.app-dialog-panel {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-md);
  flex-direction: column;
}

.cdk-overlay-pane.app-dialog-panel > * {
  .cdk-overlay-pane.app-dialog-panel > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel > .mat-mdc-dialog-container {
    border-radius: var(--radius-dialog);
    max-height: 100dvh;
    height: auto;
    max-width: 100vw;
    margin: 0 auto;
    border: none;
    padding-bottom: calc(var(--space-md) + env(safe-area-inset-bottom, 0px));
    display: flex;
    flex-direction: column;
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--sheet {
  align-items: flex-end;
  justify-content: center;
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--sheet > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog--sheet > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--sheet > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--sheet > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--sheet > .mat-mdc-dialog-container {
    width: 100%;
    max-width: 100%;
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen {
  align-items: stretch;
  justify-content: stretch;
  padding: 0;
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog--fullscreen > .mat-mdc-dialog-container {
    width: 100%;
    height: 100%;
    border-radius: 0;
    margin: 0;
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog-size-sm > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sm > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sm > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sm > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sm > .mat-mdc-dialog-container {
    max-width: min(calc(100vw - 2 * var(--space-md)), 26rem);
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog-size-md > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-md > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-md > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-md > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-md > .mat-mdc-dialog-container {
    max-width: min(calc(100vw - 2 * var(--space-md)), 37.5rem);
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog-size-lg > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-lg > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-lg > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-lg > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-lg > .mat-mdc-dialog-container {
    max-width: min(calc(100vw - 2 * var(--space-md)), 52rem);
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog-size-sheet > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sheet > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sheet > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sheet > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-sheet > .mat-mdc-dialog-container {
    width: 100%;
    max-width: 100vw;
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog-size-fullscreen > * {
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-fullscreen > cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-fullscreen > .cdk-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-fullscreen > mat-dialog-container,
  .cdk-overlay-pane.app-dialog-panel.app-dialog-size-fullscreen > .mat-mdc-dialog-container {
    width: 100%;
    height: 100%;
  }
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--scrollable {
  overflow: visible;
}

.cdk-overlay-pane.app-dialog-panel.app-dialog--scrollable .form-dialog__body {
  overflow: hidden;
}

@media (max-width: 40rem) {
  .cdk-overlay-pane.app-dialog-panel {
    max-width: 100vw !important;
    width: 100vw !important;
    height: 100dvh;
    padding: var(--space-sm);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .cdk-overlay-pane.app-dialog-panel > * {
    .cdk-overlay-pane.app-dialog-panel > cdk-dialog-container,
    .cdk-overlay-pane.app-dialog-panel > .cdk-dialog-container,
    .cdk-overlay-pane.app-dialog-panel > mat-dialog-container,
    .cdk-overlay-pane.app-dialog-panel > .mat-mdc-dialog-container {
      border-radius: var(--radius-dialog);
      max-height: calc(100dvh - 2 * var(--space-sm));
      height: auto;
      width: 100%;
      max-width: calc(100vw - 2 * var(--space-sm));
      margin: 0 auto;
      border: none;
      padding-bottom: calc(var(--space-md) + env(safe-area-inset-bottom, 0px));
      display: flex;
      flex-direction: column;
      box-sizing: border-box;
    }
  }
}
